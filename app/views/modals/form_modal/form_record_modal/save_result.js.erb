<% record = modal.form.record %>
var modal_id = '<%= modal.css_id %>';
<% if modal.form.save_success %>
  hideModal(modal_id);
  <% if !modal.table.nil? %>
    function renderRecord() {
      return '<%= j render partial: Page::IndexListPage::RECORD_HTML_PATH, locals: { record: record, table: modal.table } %>'
    }
    <% if modal.role?(:new_create) %>
      $('#<%= record.class.table_body_id %>').prepend(renderRecord());
      $('#<%= record.table_row_id %>').hide().fadeIn(1000);
    <% elsif modal.role?(:edit_update) %>
      $('#<%= record.table_row_id %>').replaceWith(renderRecord());
    <% end %>
  <% end %>
  alert_custom('<%= Constants::Alert::SUCCESS %>', '<%= t "alert.save.success" %>');
<% else %>
  $("#<%= modal.form.css_id %>").replaceWith("<%=  j render modal.form.view_path, modal: modal %>");
<% end %>
